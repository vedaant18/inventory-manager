{% extends "base.html" %}
{% block content %}

<!-- Dashboard Stats -->
<section class="stats-grid">
	<div class="stat-card">
		<h3>Total Items</h3>
		<p class="stat-number">{{ total_items }}</p>
	</div>
	<div class="stat-card alert">
		<h3>‚ö†Ô∏è Low Stock Alerts</h3>
		<p class="stat-number">{{ low_stock_count }}</p>
	</div>
</section>

<!-- Category Filter -->
<section class="card">
	<div class="filter-bar">
		<h2>üì¶ Current Inventory</h2>
		<form method="get" action="{{ url_for('inventory') }}" class="filter-form">
			<label>
				Filter:
				<select name="category" onchange="this.form.submit()">
					<option value="All" {% if selected_category == "All" %}selected{% endif %}>All Categories</option>
					{% for cat in categories %}
					<option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>{{ cat }}</option>
					{% endfor %}
				</select>
			</label>
		</form>
	</div>
	
	{% if items %}
	<div class="table-wrapper">
		<table class="inventory-table">
			<thead>
				<tr>
					<th>Category</th>
					<th>Item Name</th>
					<th>Current Stock</th>
					<th>Unit</th>
					<th>Reorder Level</th>
					<th>Status</th>
				</tr>
			</thead>
			<tbody>
				{% for item in items %}
				<tr class="{% if item.is_low_stock %}low-stock-row{% endif %}">
					<td><span class="category-badge">{{ item.category }}</span></td>
					<td><strong>{{ item.name }}</strong></td>
					<td class="quantity-col">{{ item.quantity|int }}</td>
					<td>{{ item.unit }}</td>
					<td>{{ item.reorder_level|int }}</td>
					<td>
						{% if item.is_low_stock %}
						<span class="status-badge low-stock">‚ö†Ô∏è Low Stock</span>
						{% else %}
						<span class="status-badge in-stock">‚úì In Stock</span>
						{% endif %}
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	{% else %}
	<p class="empty-state">üì≠ No items in this category.</p>
	{% endif %}
</section>

{% endblock %}

